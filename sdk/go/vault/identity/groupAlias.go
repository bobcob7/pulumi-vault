// *** WARNING: this file was generated by the Pulumi Terraform Bridge (tfgen) Tool. ***
// *** Do not edit by hand unless you're certain you know what you are doing! ***

package identity

import (
	"context"
	"reflect"

	"github.com/pkg/errors"
	"github.com/pulumi/pulumi/sdk/v3/go/pulumi"
)

// Creates an Identity Group Alias for Vault. The [Identity secrets engine](https://www.vaultproject.io/docs/secrets/identity/index.html) is the identity management solution for Vault.
//
// Group aliases allows entity membership in external groups to be managed semi-automatically. External group serves as a mapping to a group that is outside of the identity store. External groups can have one (and only one) alias. This alias should map to a notion of group that is outside of the identity store. For example, groups in LDAP, and teams in GitHub. A username in LDAP, belonging to a group in LDAP, can get its entity ID added as a member of a group in Vault automatically during logins and token renewals. This works only if the group in Vault is an external group and has an alias that maps to the group in LDAP. If the user is removed from the group in LDAP, that change gets reflected in Vault only upon the subsequent login or renewal operation.
//
// ## Example Usage
//
// ```go
// package main
//
// import (
// 	"github.com/pulumi/pulumi-vault/sdk/v4/go/vault"
// 	"github.com/pulumi/pulumi-vault/sdk/v4/go/vault/identity"
// 	"github.com/pulumi/pulumi/sdk/v3/go/pulumi"
// )
//
// func main() {
// 	pulumi.Run(func(ctx *pulumi.Context) error {
// 		group, err := identity.NewGroup(ctx, "group", &identity.GroupArgs{
// 			Policies: pulumi.StringArray{
// 				pulumi.String("test"),
// 			},
// 			Type: pulumi.String("external"),
// 		})
// 		if err != nil {
// 			return err
// 		}
// 		github, err := vault.NewAuthBackend(ctx, "github", &vault.AuthBackendArgs{
// 			Path: pulumi.String("github"),
// 			Type: pulumi.String("github"),
// 		})
// 		if err != nil {
// 			return err
// 		}
// 		_, err = identity.NewGroupAlias(ctx, "group_alias", &identity.GroupAliasArgs{
// 			CanonicalId:   group.ID(),
// 			MountAccessor: github.Accessor,
// 			Name:          pulumi.String("Github_Team_Slug"),
// 		})
// 		if err != nil {
// 			return err
// 		}
// 		return nil
// 	})
// }
// ```
type GroupAlias struct {
	pulumi.CustomResourceState

	// ID of the group to which this is an alias.
	CanonicalId pulumi.StringOutput `pulumi:"canonicalId"`
	// Mount accessor of the authentication backend to which this alias belongs to.
	MountAccessor pulumi.StringOutput `pulumi:"mountAccessor"`
	// Name of the group alias to create.
	Name pulumi.StringOutput `pulumi:"name"`
}

// NewGroupAlias registers a new resource with the given unique name, arguments, and options.
func NewGroupAlias(ctx *pulumi.Context,
	name string, args *GroupAliasArgs, opts ...pulumi.ResourceOption) (*GroupAlias, error) {
	if args == nil {
		return nil, errors.New("missing one or more required arguments")
	}

	if args.CanonicalId == nil {
		return nil, errors.New("invalid value for required argument 'CanonicalId'")
	}
	if args.MountAccessor == nil {
		return nil, errors.New("invalid value for required argument 'MountAccessor'")
	}
	if args.Name == nil {
		return nil, errors.New("invalid value for required argument 'Name'")
	}
	var resource GroupAlias
	err := ctx.RegisterResource("vault:identity/groupAlias:GroupAlias", name, args, &resource, opts...)
	if err != nil {
		return nil, err
	}
	return &resource, nil
}

// GetGroupAlias gets an existing GroupAlias resource's state with the given name, ID, and optional
// state properties that are used to uniquely qualify the lookup (nil if not required).
func GetGroupAlias(ctx *pulumi.Context,
	name string, id pulumi.IDInput, state *GroupAliasState, opts ...pulumi.ResourceOption) (*GroupAlias, error) {
	var resource GroupAlias
	err := ctx.ReadResource("vault:identity/groupAlias:GroupAlias", name, id, state, &resource, opts...)
	if err != nil {
		return nil, err
	}
	return &resource, nil
}

// Input properties used for looking up and filtering GroupAlias resources.
type groupAliasState struct {
	// ID of the group to which this is an alias.
	CanonicalId *string `pulumi:"canonicalId"`
	// Mount accessor of the authentication backend to which this alias belongs to.
	MountAccessor *string `pulumi:"mountAccessor"`
	// Name of the group alias to create.
	Name *string `pulumi:"name"`
}

type GroupAliasState struct {
	// ID of the group to which this is an alias.
	CanonicalId pulumi.StringPtrInput
	// Mount accessor of the authentication backend to which this alias belongs to.
	MountAccessor pulumi.StringPtrInput
	// Name of the group alias to create.
	Name pulumi.StringPtrInput
}

func (GroupAliasState) ElementType() reflect.Type {
	return reflect.TypeOf((*groupAliasState)(nil)).Elem()
}

type groupAliasArgs struct {
	// ID of the group to which this is an alias.
	CanonicalId string `pulumi:"canonicalId"`
	// Mount accessor of the authentication backend to which this alias belongs to.
	MountAccessor string `pulumi:"mountAccessor"`
	// Name of the group alias to create.
	Name string `pulumi:"name"`
}

// The set of arguments for constructing a GroupAlias resource.
type GroupAliasArgs struct {
	// ID of the group to which this is an alias.
	CanonicalId pulumi.StringInput
	// Mount accessor of the authentication backend to which this alias belongs to.
	MountAccessor pulumi.StringInput
	// Name of the group alias to create.
	Name pulumi.StringInput
}

func (GroupAliasArgs) ElementType() reflect.Type {
	return reflect.TypeOf((*groupAliasArgs)(nil)).Elem()
}

type GroupAliasInput interface {
	pulumi.Input

	ToGroupAliasOutput() GroupAliasOutput
	ToGroupAliasOutputWithContext(ctx context.Context) GroupAliasOutput
}

func (*GroupAlias) ElementType() reflect.Type {
	return reflect.TypeOf((*GroupAlias)(nil))
}

func (i *GroupAlias) ToGroupAliasOutput() GroupAliasOutput {
	return i.ToGroupAliasOutputWithContext(context.Background())
}

func (i *GroupAlias) ToGroupAliasOutputWithContext(ctx context.Context) GroupAliasOutput {
	return pulumi.ToOutputWithContext(ctx, i).(GroupAliasOutput)
}

func (i *GroupAlias) ToGroupAliasPtrOutput() GroupAliasPtrOutput {
	return i.ToGroupAliasPtrOutputWithContext(context.Background())
}

func (i *GroupAlias) ToGroupAliasPtrOutputWithContext(ctx context.Context) GroupAliasPtrOutput {
	return pulumi.ToOutputWithContext(ctx, i).(GroupAliasPtrOutput)
}

type GroupAliasPtrInput interface {
	pulumi.Input

	ToGroupAliasPtrOutput() GroupAliasPtrOutput
	ToGroupAliasPtrOutputWithContext(ctx context.Context) GroupAliasPtrOutput
}

type groupAliasPtrType GroupAliasArgs

func (*groupAliasPtrType) ElementType() reflect.Type {
	return reflect.TypeOf((**GroupAlias)(nil))
}

func (i *groupAliasPtrType) ToGroupAliasPtrOutput() GroupAliasPtrOutput {
	return i.ToGroupAliasPtrOutputWithContext(context.Background())
}

func (i *groupAliasPtrType) ToGroupAliasPtrOutputWithContext(ctx context.Context) GroupAliasPtrOutput {
	return pulumi.ToOutputWithContext(ctx, i).(GroupAliasPtrOutput)
}

// GroupAliasArrayInput is an input type that accepts GroupAliasArray and GroupAliasArrayOutput values.
// You can construct a concrete instance of `GroupAliasArrayInput` via:
//
//          GroupAliasArray{ GroupAliasArgs{...} }
type GroupAliasArrayInput interface {
	pulumi.Input

	ToGroupAliasArrayOutput() GroupAliasArrayOutput
	ToGroupAliasArrayOutputWithContext(context.Context) GroupAliasArrayOutput
}

type GroupAliasArray []GroupAliasInput

func (GroupAliasArray) ElementType() reflect.Type {
	return reflect.TypeOf(([]*GroupAlias)(nil))
}

func (i GroupAliasArray) ToGroupAliasArrayOutput() GroupAliasArrayOutput {
	return i.ToGroupAliasArrayOutputWithContext(context.Background())
}

func (i GroupAliasArray) ToGroupAliasArrayOutputWithContext(ctx context.Context) GroupAliasArrayOutput {
	return pulumi.ToOutputWithContext(ctx, i).(GroupAliasArrayOutput)
}

// GroupAliasMapInput is an input type that accepts GroupAliasMap and GroupAliasMapOutput values.
// You can construct a concrete instance of `GroupAliasMapInput` via:
//
//          GroupAliasMap{ "key": GroupAliasArgs{...} }
type GroupAliasMapInput interface {
	pulumi.Input

	ToGroupAliasMapOutput() GroupAliasMapOutput
	ToGroupAliasMapOutputWithContext(context.Context) GroupAliasMapOutput
}

type GroupAliasMap map[string]GroupAliasInput

func (GroupAliasMap) ElementType() reflect.Type {
	return reflect.TypeOf((map[string]*GroupAlias)(nil))
}

func (i GroupAliasMap) ToGroupAliasMapOutput() GroupAliasMapOutput {
	return i.ToGroupAliasMapOutputWithContext(context.Background())
}

func (i GroupAliasMap) ToGroupAliasMapOutputWithContext(ctx context.Context) GroupAliasMapOutput {
	return pulumi.ToOutputWithContext(ctx, i).(GroupAliasMapOutput)
}

type GroupAliasOutput struct {
	*pulumi.OutputState
}

func (GroupAliasOutput) ElementType() reflect.Type {
	return reflect.TypeOf((*GroupAlias)(nil))
}

func (o GroupAliasOutput) ToGroupAliasOutput() GroupAliasOutput {
	return o
}

func (o GroupAliasOutput) ToGroupAliasOutputWithContext(ctx context.Context) GroupAliasOutput {
	return o
}

func (o GroupAliasOutput) ToGroupAliasPtrOutput() GroupAliasPtrOutput {
	return o.ToGroupAliasPtrOutputWithContext(context.Background())
}

func (o GroupAliasOutput) ToGroupAliasPtrOutputWithContext(ctx context.Context) GroupAliasPtrOutput {
	return o.ApplyT(func(v GroupAlias) *GroupAlias {
		return &v
	}).(GroupAliasPtrOutput)
}

type GroupAliasPtrOutput struct {
	*pulumi.OutputState
}

func (GroupAliasPtrOutput) ElementType() reflect.Type {
	return reflect.TypeOf((**GroupAlias)(nil))
}

func (o GroupAliasPtrOutput) ToGroupAliasPtrOutput() GroupAliasPtrOutput {
	return o
}

func (o GroupAliasPtrOutput) ToGroupAliasPtrOutputWithContext(ctx context.Context) GroupAliasPtrOutput {
	return o
}

type GroupAliasArrayOutput struct{ *pulumi.OutputState }

func (GroupAliasArrayOutput) ElementType() reflect.Type {
	return reflect.TypeOf((*[]GroupAlias)(nil))
}

func (o GroupAliasArrayOutput) ToGroupAliasArrayOutput() GroupAliasArrayOutput {
	return o
}

func (o GroupAliasArrayOutput) ToGroupAliasArrayOutputWithContext(ctx context.Context) GroupAliasArrayOutput {
	return o
}

func (o GroupAliasArrayOutput) Index(i pulumi.IntInput) GroupAliasOutput {
	return pulumi.All(o, i).ApplyT(func(vs []interface{}) GroupAlias {
		return vs[0].([]GroupAlias)[vs[1].(int)]
	}).(GroupAliasOutput)
}

type GroupAliasMapOutput struct{ *pulumi.OutputState }

func (GroupAliasMapOutput) ElementType() reflect.Type {
	return reflect.TypeOf((*map[string]GroupAlias)(nil))
}

func (o GroupAliasMapOutput) ToGroupAliasMapOutput() GroupAliasMapOutput {
	return o
}

func (o GroupAliasMapOutput) ToGroupAliasMapOutputWithContext(ctx context.Context) GroupAliasMapOutput {
	return o
}

func (o GroupAliasMapOutput) MapIndex(k pulumi.StringInput) GroupAliasOutput {
	return pulumi.All(o, k).ApplyT(func(vs []interface{}) GroupAlias {
		return vs[0].(map[string]GroupAlias)[vs[1].(string)]
	}).(GroupAliasOutput)
}

func init() {
	pulumi.RegisterOutputType(GroupAliasOutput{})
	pulumi.RegisterOutputType(GroupAliasPtrOutput{})
	pulumi.RegisterOutputType(GroupAliasArrayOutput{})
	pulumi.RegisterOutputType(GroupAliasMapOutput{})
}
